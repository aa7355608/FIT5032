import{d as V,u as k,r as o,c as f,a as t,b as y,e as n,w as p,v as m,t as c,f as C,g as h,h as N,i as P,j as B,o as w,_ as S}from"./index-C3eiZ6Va.js";const U={class:"card",style:{"max-width":"520px",margin:"32px auto"}},q={style:{"margin-top":"10px"}},A={style:{"margin-top":"10px"}},D={style:{"margin-top":"10px"}},E={key:0,class:"error",role:"alert",style:{"margin-top":"8px"}},L={key:1,class:"muted",role:"status","aria-live":"polite"},M={class:"row",style:{gap:"8px","margin-top":"16px"}},T=["disabled"],j=V({__name:"Register",setup(I){const x=B(),b=k(),v=o(""),i=o(""),l=o(""),g=o(""),s=o(""),r=o(""),u=o(!1);async function _(){if(s.value="",r.value="",!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.value)){s.value="Please enter a valid email.";return}if(l.value.length<6){s.value="Password must be at least 6 characters.";return}if(l.value!==g.value){s.value="Passwords do not match.";return}u.value=!0;try{await b.register({name:v.value||"",email:i.value,password:l.value}),r.value="Account created.",x.push("/dashboard")}catch(d){s.value=(d==null?void 0:d.message)||"Registration failed."}finally{u.value=!1}}return(d,e)=>{const R=N("RouterLink");return w(),f("section",U,[e[9]||(e[9]=t("h2",null,"Create an Account",-1)),e[10]||(e[10]=t("p",{class:"muted"},"Register with email and password.",-1)),t("form",{onSubmit:P(_,["prevent"]),novalidate:""},[t("label",null,[e[4]||(e[4]=n(" Display Name (optional) ",-1)),p(t("input",{id:"name",class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),maxlength:"40"},null,512),[[m,v.value,void 0,{trim:!0}]])]),t("label",q,[e[5]||(e[5]=n(" Email ",-1)),p(t("input",{id:"email",class:"input",type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),autocomplete:"email",required:""},null,512),[[m,i.value,void 0,{trim:!0}]])]),t("label",A,[e[6]||(e[6]=n(" Password ",-1)),p(t("input",{id:"password",class:"input",type:"password","onUpdate:modelValue":e[2]||(e[2]=a=>l.value=a),autocomplete:"new-password",required:"",minlength:"6"},null,512),[[m,l.value]])]),t("label",D,[e[7]||(e[7]=n(" Confirm Password ",-1)),p(t("input",{id:"confirm",class:"input",type:"password","onUpdate:modelValue":e[3]||(e[3]=a=>g.value=a),required:"",minlength:"6"},null,512),[[m,g.value]])]),s.value?(w(),f("p",E,c(s.value),1)):y("",!0),r.value?(w(),f("p",L,c(r.value),1)):y("",!0),t("div",M,[t("button",{class:"btn",disabled:u.value},c(u.value?"Creatingâ€¦":"Register"),9,T),C(R,{to:"/login",class:"btn ghost"},{default:h(()=>[...e[8]||(e[8]=[n("Back to login",-1)])]),_:1})])],32)])}}}),z=S(j,[["__scopeId","data-v-133f4efd"]]);export{z as default};
